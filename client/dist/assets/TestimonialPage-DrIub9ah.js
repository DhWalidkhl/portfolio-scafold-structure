import{U as b,r as N,e as p,j as e,b as v}from"./index-DynLtj-U.js";import{A as y}from"./AdminDashboardLayout-CV2sGBHg.js";import{T}from"./TestimonialStore-CuSqJVlJ.js";import{a as u}from"./index-D2z6ku8J.js";import{R as f}from"./index-Dk1QIc7W.js";import{L as w,s as i}from"./Login-XqRwyapz.js";import{L}from"./Layout-DU5QFRme.js";const F=()=>{let{isLogin:x}=b(),{TestimonialListRequest:h,TestimonialList:d,TestimonialListByUser:m,TestimonialListByUserRequest:g}=T(),o=sessionStorage.getItem("role");N.useEffect(()=>{(async()=>x()&&o==="admin"?await h():x()&&o==="user"?await g():(p.remove("token"),sessionStorage.clear()))()},[]);const j=async s=>{i({title:"Are you sure?",text:"This action cannot be undone. Do you want to delete this testimonial?",icon:"warning",buttons:!0,dangerMode:!0}).then(async a=>{if(a)try{o==="admin"?(await v.delete(`/api/v1/DeleteTestimonial/${s}`)).data.status==="success"?(i("Your Testimonial has been deleted!",{icon:"success"}),await h()):i("Failed to delete the Testimonial!",{icon:"error"}):i("Failed to delete the Testimonial!",{icon:"error"})}catch(t){console.error(t),i("Something went wrong!",{icon:"error"})}else i("Your Testimonial is safe!")})};return x()?e.jsx(y,{children:o==="admin"?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("h1",{className:"text-xl font-semibold",children:["Total Testimonials: ",d.length]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SL"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:d.length===0?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No testimonials found."}):d.map((s,a)=>{var t,l,r,n,c;return e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle h-12 w-12",children:e.jsx("img",{src:(t=s.user)==null?void 0:t.img,alt:"author image"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold",children:[(l=s.user)==null?void 0:l.firstName," ",(r=s.user)==null?void 0:r.lastName]}),e.jsx("div",{className:"text-sm opacity-50",children:(n=s.user)==null?void 0:n.email})]})]})}),e.jsx("td",{children:(c=s.des)==null?void 0:c.slice(0,100)}),e.jsx("th",{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{title:"View",className:"btn btn-ghost btn-xs text-lg",children:e.jsx(u,{})}),e.jsx("button",{title:"Delete",onClick:()=>j(s._id),className:"btn btn-soft btn-error btn-xs text-md",children:e.jsx(f,{})})]})})]},s._id)})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("h1",{className:"text-xl font-semibold",children:["Total Testimonials: ",m.length]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SL"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:m.length===0?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No testimonials found."}):d.map((s,a)=>{var t,l,r,n,c;return e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle h-12 w-12",children:e.jsx("img",{src:(t=s.user)==null?void 0:t.img,alt:"author image"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold",children:[(l=s.user)==null?void 0:l.firstName," ",(r=s.user)==null?void 0:r.lastName]}),e.jsx("div",{className:"text-sm opacity-50",children:(n=s.user)==null?void 0:n.email})]})]})}),e.jsx("td",{children:(c=s.des)==null?void 0:c.slice(0,100)}),e.jsx("th",{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{title:"View",className:"btn btn-ghost btn-xs text-lg",children:e.jsx(u,{})}),e.jsx("button",{title:"Delete",onClick:()=>j(s._id),className:"btn btn-soft btn-error btn-xs text-md",children:e.jsx(f,{})})]})})]},s._id)})})]})})]})}):e.jsx(L,{children:e.jsxs("div",{className:"flex flex-col gap-10 items-center justify-center h-screen",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Please Login to Access the Page"}),e.jsx(w,{})]})})};export{F as default};
