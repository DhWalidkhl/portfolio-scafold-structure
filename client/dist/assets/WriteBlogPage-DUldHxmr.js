import{U as L,r as o,j as e}from"./index-Bg1qYejM.js";import{J as N}from"./jodit-react-D2MivxB-.js";import{A as v}from"./AdminDashboardLayout-Cm_wWkcl.js";import{B as k}from"./blogStore-D4i0_kTC.js";import{L as B,s as r}from"./Login-DIDXVsrw.js";import{L as w}from"./Layout-Dh1XUbq4.js";const D=()=>{const{isLogin:g,FileUploading:t,LoginFormData:n,LoginFormOnChange:a,FileUploadOnChange:h,ImageName:b,imagePublicId:x}=L(),{PostBlogRequest:f,CreatingBlog:s}=k(),p=o.useRef(null),[c,m]=o.useState(""),[i,u]=o.useState(!1),j=o.useMemo(()=>({placeholder:"Start typing your blog...",height:400,enter:"BR",useTabForNext:!0,cleanHTML:{removeEmptyElements:!1,fillEmptyParagraph:!1},removeEmptyBlocks:!1,defaultLineHeight:""}),[]),y=async l=>{if(l.preventDefault(),!c){r("Validation Error","Please enter blog content.","warning");return}u(!0);try{const d={...n,img:b,imagePublicId:x,des:c};await f(d)?(r("Good job!","Your Blog Created Successfully","success"),a("title",""),a("githubLink",""),a("liveLink",""),m("")):r("Oops!","Failed to create blog. Please try again.","error")}catch(d){console.error("Create Blog",d),r("Error","Something went wrong! Please try again.","error")}finally{u(!1)}};return e.jsx(e.Fragment,{children:g()?e.jsx(v,{children:e.jsxs("section",{"aria-labelledby":"page-title",className:"mx-auto p-4",children:[e.jsx("h1",{id:"page-title",className:"text-center text-3xl font-semibold underline mb-8",children:"Write a Blog Now"}),e.jsxs("form",{onSubmit:y,noValidate:!0,children:[e.jsxs("fieldset",{className:"mb-6",children:[e.jsx("legend",{className:"text-lg font-semibold mb-2",children:"Blog Title"}),e.jsx("label",{htmlFor:"blog-title",className:"sr-only",children:"Blog Title"}),e.jsx("input",{id:"blog-title",name:"title",type:"text",value:n.title||"",onChange:l=>a("title",l.target.value),className:"input w-full",placeholder:"Type here",required:!0,disabled:i||t||s})]}),e.jsxs("div",{children:[e.jsx("legend",{className:"text-lg font-semibold mb-2",children:"Blog Body"}),e.jsx(N,{ref:p,value:c,config:j,onBlur:l=>m(l),onChange:l=>m(l)})]}),e.jsxs("div",{className:"lg:flex gap-6 mb-6",children:[e.jsxs("fieldset",{className:"w-full",children:[e.jsx("legend",{className:"text-lg font-semibold mb-2",children:"Github Link"}),e.jsx("label",{htmlFor:"github-link",className:"sr-only",children:"Github Link"}),e.jsx("input",{id:"github-link",name:"githubLink",type:"url",value:n.githubLink||"",onChange:l=>a("githubLink",l.target.value),className:"input w-full",placeholder:"https://github.com/your-repo",required:!0,disabled:i||t||s})]}),e.jsxs("fieldset",{className:"w-full",children:[e.jsx("legend",{className:"text-lg font-semibold mb-2",children:"Live Link"}),e.jsx("label",{htmlFor:"live-link",className:"sr-only",children:"Live Link"}),e.jsx("input",{id:"live-link",name:"liveLink",type:"url",value:n.liveLink||"",onChange:l=>a("liveLink",l.target.value),className:"input w-full",placeholder:"https://your-live-site.com",required:!0,disabled:i||t||s})]})]}),e.jsxs("fieldset",{className:"mb-6",children:[e.jsx("legend",{className:"text-lg font-semibold mb-2",children:"Thumbnail Photo"}),e.jsx("label",{htmlFor:"thumbnail-photo",className:"sr-only",children:"Thumbnail Photo"}),e.jsx("input",{id:"thumbnail-photo",type:"file",accept:"image/*",onChange:h,className:"file-input w-full",required:!0,disabled:i||t||s})]}),e.jsx("button",{type:"submit",disabled:i||t||s,"aria-busy":i||t||s,"aria-disabled":i||t||s,className:"btn btn-soft btn-info mt-5 w-full",children:i||t||s?"Loading...":"Submit"})]})]})}):e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col gap-10 items-center justify-center h-screen",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Please Login to Access the Page"}),e.jsx(B,{})]})})})};export{D as default};
