import{U as j,r as c,d as b,j as e,L as f,a as u}from"./index-DhF9NZF3.js";import{A as g}from"./AdminDashboardLayout-EIMp_-y_.js";import{R as p}from"./index-BF_cJBhq.js";import{L}from"./Layout-D1OdYfqz.js";import{L as N,s as t}from"./Login-DEwbf6GI.js";import{T as y}from"./TnTStore-DzXVQyA-.js";const R=()=>{let{isLogin:a}=j(),n=sessionStorage.getItem("role"),{TnTList:i,TnTListRequest:o}=y();const[d,x]=c.useState(!1);c.useEffect(()=>{a()&&n==="admin"?o():(b.remove("token"),sessionStorage.clear())},[o,a,n,d]);const h=async s=>{t({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data!",icon:"warning",buttons:!0,dangerMode:!0}).then(async l=>{if(l)try{if(n==="admin"){const r=await u.delete(`/api/v1/DeleteTnT/${s}`);r.data.status==="success"?(t("Your blog has been deleted!",{icon:"success"}),x(m=>!m)):(t("Failed to delete the blog!",{icon:"error"}),console.log(r))}}catch(r){console.error(r),t("Something went wrong!",{icon:"error"})}else t("Your blog is safe!")})};return a()?e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 container py-5 px-10",children:[e.jsxs("h1",{className:"text-xl font-semibold",children:["Total TnC : ",i.length]}),e.jsx(f,{to:"/dashboard/createTnT",className:"btn btn-outline btn-primary",children:"Write a TnC"})]}),n==="admin"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:e.jsx("label",{children:"SL"})}),e.jsx("th",{className:"text-center",children:"Title"}),e.jsx("th",{className:"text-center",children:"Description"}),e.jsx("th",{className:"text-center",children:"Action"})]})}),e.jsx("tbody",{children:i.map((s,l)=>e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{children:l+1})}),e.jsx("td",{children:e.jsx("p",{className:"font-semibold",children:s.title})}),e.jsx("td",{children:e.jsx("p",{dangerouslySetInnerHTML:{__html:s.des.slice(0,200)}})}),e.jsx("th",{children:e.jsx("div",{className:"flex gap-1",children:e.jsx("button",{onClick:()=>h(s._id),className:"btn btn-soft btn-error btn-xs text-md",children:e.jsx(p,{})})})})]},s._id))})]})}):e.jsx(e.Fragment,{})]}):e.jsx(L,{children:e.jsxs("div",{className:"flex flex-col gap-10 items-center justify-center h-screen",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Please Login to Access the Page"}),e.jsx(N,{})]})})};export{R as default};
