import{r,j as e,b as m}from"./index-DynLtj-U.js";import{L as j}from"./Layout-DU5QFRme.js";import{L as N,s as l}from"./Login-XqRwyapz.js";const P=()=>{const[a,i]=r.useState(1),[d,n]=r.useState(!1),[o,p]=r.useState(""),[c,x]=r.useState(""),[u,f]=r.useState(""),b=async s=>{s.preventDefault(),n(!0);try{const t=await m.post("/api/v1/ForgetPassword",{email:o});t.data.status==="success"?(l(t.data.message),i(2)):l(t.data.message)}catch{l("Failed to send OTP")}finally{n(!1)}},h=async s=>{if(s.preventDefault(),!c)return l("Enter OTP");i(3)},w=async s=>{s.preventDefault(),n(!0);try{const t=await m.post("/api/v1/ResetPassword",{email:o,otp:c,newPassword:u});t.data.status==="success"?(l("Password reset successful"),localStorage.setItem("token",t.data.token),window.location.href="/"):l(t.data.message)}catch{l("Failed to reset password")}finally{n(!1)}};return e.jsx(j,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-base-200",children:e.jsxs("div",{className:"card w-full max-w-md shadow-xl bg-base-100 p-8 rounded-xl",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-4",children:"Forgot Password"}),e.jsx("p",{className:"text-center text-gray-500 mb-6",children:"Enter your email to receive a otp to reset your password."}),e.jsxs("form",{className:"space-y-4",onSubmit:a===1?b:a===2?h:w,children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label mb-2",children:e.jsx("span",{className:"label-text",children:"Email"})}),e.jsx("input",{type:"email",className:"input input-bordered w-full",value:o,onChange:s=>p(s.target.value),disabled:a>1,required:!0})]}),a>=2&&e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label mb-2",children:e.jsx("span",{className:"label-text",children:"OTP"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",value:c,onChange:s=>x(s.target.value),required:!0})]}),a===3&&e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label mb-2",children:e.jsx("span",{className:"label-text",children:"New Password"})}),e.jsx("input",{type:"password",className:"input input-bordered w-full",value:u,onChange:s=>f(s.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:d,children:d?"Processing...":a===1?"Send OTP":a===2?"Verify OTP":"Reset Password"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(N,{})})]})})})};export{P as default};
